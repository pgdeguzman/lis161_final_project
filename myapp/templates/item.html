{% extends 'base.html' %}

{% block content %}
<div class="product-details">
  <div class="product-image">
    <img src="{{ item['image_url'] }}" id="product_image" alt="{{ name }} Image">
  </div>
  <div class="product-info">
    <h2>{{ name }}</h2> 
    <p>Description: {{ description }}</p>
    <table>
      <tr>
        <td>Stock:</td>
        <td>{{ stock }}</td>
      </tr>
    </table>
    {% if session.logged_in %}
    <p>Date Last Modified: {{ item['timestamp'] }}</p>
    {% endif %}
    <form action="/buy" method="POST">
      <input type="hidden" name="name" value="{{ name }}">
      <input type="hidden" name="price" value="{{ price }}">
      <div>
        <label for="size">Size:</label>
        <select name="size" id="size">
          <option value="Small">Small</option>
          <option value="Medium">Medium</option>
          <option value="Large">Large</option>
        </select>
      </div>
      <div>
        <label for="quantity">Quantity:</label>
        <input type="number" name="quantity" id="quantity" min="1" max="{{ stock }}" value="1">
      </div>
      <p>Price: {{ price }}</p>
    </form>
    {% if session.logged_in %}
    <form action="{{ url_for('modify') }}" method="post">
      <input type="hidden" name="product_id" value="{{ product.id }}">
      <input class="btn btn-secondary" type="submit" name="action" value="edit"></input>
      <input class="btn btn-danger" type="submit" name="action" value="delete"></input>
    </form>
    {% else %}
    <form action="{{ url_for('buy') }}" method="post">
      <input type="hidden" name="product_id" value="{{ product.id }}">
      <input class="btn btn-secondary" type="submit" name="action" value="Buy"></input>
    </form>
    {% endif %}
  </div>
</div>
{% endblock %}
